<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>OnaBet - Verificação</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="icon" type="image/png" href="favicon.svg" />
    <style>
      html, body {
        height: 100%;
        margin: 0;
        overflow: hidden;
    }
        body {
            
            background-color: #0F0518;
            color: #EAEAEA;
        }
        .custom-card {
            max-width: 400px;
            width: 100%;
            background-color: #201825;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .brand {
          max-width: 120px;
          width: 100%;
          white-space: nowrap;
        }
    </style>
  </head>
  <body class="d-flex justify-content-center align-items-center flex-column" onload="checkCpf()">

      
    <div class="custom-card text-center">
      
        <img src="logoona.png" alt="Sorte Esportiva" class="img-fluid" width="50%">

        <h2 class="my-4"> Digite seu CPF: </h2>
        <div class="my-3">
            <input type="number" class="form-control form-control-lg w-100" placeholder="000.000.000-00" minlength="11" maxlength="14" id="legitimuz-hydrate-cpf">
        </div>
        <button class="btn btn-light w-100 btn-lg" id="legitimuz-action-verify">Iniciar verificação</button>
    </div>

    <div class="brand text-white mt-4 text-center d-flex justify-content-center align-items-center" onclick="legitimuzLink()" onmouseover="legitimuzLinkOn()" onmouseout="legitimuzLinkOut()" id="brand">
      
      <small>
          <span>powered by</span>
      </small>
    
      <img src="logolegit.svg" alt="Legitimuz" class="ms-2 img-fluid align-self-center ml-2">
    
  </div>
  
  

    <div id="legitimuz-root"></div>
    <script src="https://cdn.legitimuz.com/js/sdk/legitimuz-sdk.js"></script>
    <script lang="text/javascript">
      const legitimuz = Legitimuz({
        host: "https://api.legitimuz.com",
        token: "0a7d1df1-a7f1-44e0-9566-73ee97c2093a",
        onSuccess: (ocr) => {
          console.log("ocr deu boa");
          lockButton()
        },
        onError: (ocr) => {
          console.log("ocr deu ruim");
          lockButton()
        }
      });

    legitimuz.mount();
    </script>

  <script>

document.addEventListener('DOMContentLoaded', function() {
  var inputCPF = document.getElementById('legitimuz-hydrate-cpf');
  var button = document.getElementById('legitimuz-action-verify');

  function initializeInput() {
    var lockTime = localStorage.getItem('lockTime');
    var currentTime = new Date().getTime();
    var savedCPF = localStorage.getItem('savedCPF');

    if (lockTime && currentTime - lockTime < 86400000) {
      inputCPF.setAttribute('readonly', true);
      inputCPF.classList.add('disabled');
      if (savedCPF) {
        inputCPF.value = savedCPF;
      }
    } else {
      inputCPF.removeAttribute('readonly');
      inputCPF.classList.remove('disabled');
    }
  }

  function lockInput() {
    var cpfValue = inputCPF.value;
    if (cpfValue) {
      localStorage.setItem('savedCPF', cpfValue);
      localStorage.setItem('lockTime', new Date().getTime());
      inputCPF.setAttribute('readonly', true);
      inputCPF.classList.add('disabled');
      // O botão não é bloqueado aqui, apenas o input
    } else {
      alert('Por favor, digite um CPF válido.');
    }
  }

  // Função independente para bloquear o botão
  window.lockButton = function() {
    var lockTime = localStorage.getItem('lockTime');
    var currentTime = new Date().getTime();

    // Se lockTime ainda não foi setado ou já passou 24h, permita bloquear o botão
    if (!lockTime || currentTime - lockTime >= 86400000) {
      localStorage.setItem('lockTime', new Date().getTime());
      button.disabled = true;
    } else {
      console.log('O botão já está bloqueado e não pode ser bloqueado novamente até que o tempo de bloqueio expire.');
    }
  };

  // Evento de clique do botão que bloqueia apenas o input
  button.addEventListener('click', lockInput);

  // Verifica e inicializa o estado do input ao carregar a página
  initializeInput();
});



    function checkCpf() {
      const parametros = location.search;
      const parametro = parametros.split("=")[0]
      const valor = parametros.split("=")[1]

      if(parametro == "?cpf") {
        document.querySelector("#legitimuz-hydrate-cpf").value = valor
      }
    }

    function legitimuzLinkOn() {
      document.querySelector("#brand").style.textDecoration = 'underline';
      document.querySelector("#brand").style.cursor = 'pointer';
    }

    function legitimuzLinkOut() {
      document.querySelector("#brand").style.textDecoration = 'none';
    }

    function legitimuzLink() {
    window.open("https://legitimuz.com/", "_blank");
}


  </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>
